!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){if("Microsoft Internet Explorer"===navigator.appName||navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/rv:11/)){var n=document.createElement("div");n.innerHTML='Používáte zastaralý Internet Explorer, takže vám části tohoto webu nemusí fungovat. Navíc to <a target="_blank" style="color:white;" rel="noopener noreferrer" href="https://www.zive.cz/clanky/microsoft-internet-explorer-neni-prohlizec-prestante-ho-tak-pouzivat/sc-3-a-197149/default.aspx">není bezpečné</a>, zvažte přechod na <a target="_blank" style="color:white;" rel="noopener noreferrer" href="https://www.mozilla.org/cs/firefox/new/">jiný prohlížeč</a>.',n.style.cssText="text-align:center;position:absolute;width:100%;height:auto;opacity:1;z-index:100;background-color:#d52834;top:37px;padding-top:4px;padding-bottom:3px;color:white;",document.body.appendChild(n)}},function(e,t,n){"use strict";n.r(t);n(0);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o="https://data.irozhlas.cz/vlaky-nehody";"localhost"===window.location.hostname&&(o="localhost");var a=new mapboxgl.Map({container:"mapa_nehod",minZoom:5,maxZoom:16,style:{version:8,sources:{"raster-tiles":{type:"raster",tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, geocoder <a href="https://.mapy.cz/">Mapy.cz</a>, data <a href="http://www.dicr.cz/">Drážní inspekce ČR</a>.'}},layers:[{id:"simple-tiles",type:"raster",source:"raster-tiles",minzoom:4,maxzoom:22}]},center:[15.33507,49.74175],zoom:6});a.scrollZoom.disable(),a.addControl(new mapboxgl.NavigationControl);var i=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"onAdd",value:function(e){return this.map=e,this.container=document.createElement("div"),this.container.id="legend",this.container.innerHTML="Pro zobrazení konkrétních míst přibližte mapu.",this.container}},{key:"onRemove",value:function(){this.container.parentNode.removeChild(this.container),this.map=void 0}}])&&r(t.prototype,n),o&&r(t,o),e}());a.addControl(i,"top-left"),a.on("load",(function(){a.addSource("nehody",{type:"geojson",data:o+"/data/data.json"}),a.addLayer({id:"nehody-heat",type:"heatmap",source:"nehody",maxzoom:12,paint:{"heatmap-weight":["interpolate",["linear"],["+",["get","ex"],["get","tr"],["get","lr"]],0,0,4,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,15,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(252,187,161,0)",.2,"rgb(252,146,114)",.4,"rgb(251,106,74)",.6,"rgb(239,59,44)",.8,"rgb(203,24,29)",1,"rgb(153,0,13)"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,8,4,20],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,10,0]}}),a.addLayer({id:"nehody-point",type:"circle",source:"nehody",minzoom:8,paint:{"circle-radius":["interpolate",["linear"],["zoom"],7,["interpolate",["linear"],["+",["get","ex"],["get","tr"],["get","lr"]],1,1,4,6],16,["interpolate",["linear"],["+",["get","ex"],["get","tr"],["get","lr"]],1,10,4,50]],"circle-color":["interpolate",["linear"],["+",["get","ex"],["get","tr"],["get","lr"]],0,"rgb(252,187,161)",4,"rgb(153,0,13)"],"circle-stroke-color":"white","circle-stroke-width":1,"circle-opacity":["interpolate",["linear"],["zoom"],7,1,8,1]}})})),a.on("zoomend",(function(e){a.getZoom()>=8?(document.getElementById("legend").innerHTML="Kliknutím vyberte místo nehod.",a.getCanvas().style.cursor="default"):(document.getElementById("legend").innerHTML="Pro zobrazení konkrétních míst přibližte mapu.",a.getCanvas().style.cursor="grab")})),a.on("click",(function(e){a.scrollZoom.enable();var t,n=a.queryRenderedFeatures(e.point,{layers:["nehody-point"]});n.length>0&&(document.getElementById("legend").innerHTML="<b>Trať ".concat((t=n[0].properties.trat,t.length>4?t:"<i>bez jména</i>"),", ").concat(n[0].properties.km_h,". km</b><br>Mrtvých: ").concat(n[0].properties.ex,"<br>Těžce raněných: ").concat(n[0].properties.tr,"<br>Lehce raněných: ").concat(n[0].properties.lr))})),function(e){document.getElementById("frm-geocode").onsubmit=function(t){t.preventDefault();var n=document.getElementById("inp-geocode").value;""===n?e.flyTo({center:[15.3350758,49.7417517],zoom:7}):fetch("https://api.mapy.cz/geocode?query=".concat(n)).then((function(e){return e.text()})).then((function(e){return(new window.DOMParser).parseFromString(e,"text/xml")})).then((function(t){var n=t.firstChild.children[0];if(0!==n.children.length){var r=parseFloat(n.children[0].attributes.x.value),o=parseFloat(n.children[0].attributes.y.value);r<12||r>19||o<48||o>52?document.getElementById("inp-geocode").style.borderColor="red":e.flyTo({center:[r,o],zoom:10})}else document.getElementById("inp-geocode").style.borderColor="red"})).catch((function(e){throw e}))}}(a)}]);